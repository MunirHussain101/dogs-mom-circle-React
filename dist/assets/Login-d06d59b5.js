import{r,i as S,_ as f,m as N,c as O,d as j,j as o,F as A,R as C,a as e,C as t,L as y,B as M,e as x,O as z,z as D,P}from"./index-4922176f.js";import{F as c,C as R}from"./index-6ec19458.js";import{I as w}from"./index-cb81a0a9.js";import{M as V}from"./MailOutlined-2254e984.js";var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const H=q;var k=function(d,n){return r.createElement(S,f(f({},d),{},{ref:n,icon:H}))};k.displayName="LockOutlined";const $=r.forwardRef(k);const J=()=>{const[l,d]=r.useState(!1),[n,v]=N.useMessage(),[b,F]=r.useState(""),[_]=c.useForm(),L=O(),u=j(),B=async i=>{var a,g,p,h;try{const s=await x.post("/api/auth/signin",{email:i.email,password:i.password});F((g=(a=s==null?void 0:s.data)==null?void 0:a.data)==null?void 0:g.user.id),localStorage.setItem("token",(h=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:h.token);const{email:E,password:I}=i;await z(D,E,I),d(!0)}catch(s){n.open({type:"error",content:s.response.data.message})}},m=localStorage.getItem("token");return r.useEffect(()=>{l&&(async()=>{try{const a=await x.post("/api/user/get-profile",{id:b,token:m});L(P(a.data)),n.open({type:"success",content:"Logged In SuccessFully"}),setTimeout(()=>{_.resetFields(),u("/search")},1e3)}catch(a){n.open({type:"error",content:a.response})}})()},[l]),r.useEffect(()=>{m&&u("/")},[]),o(A,{children:[v,o(C,{className:"main_row_for_login",justify:"center",children:[e(t,{lg:5,xs:0}),e(t,{lg:14,xs:24,style:{display:"flex",justifyContent:"center",background:"#FFFFFF",padding:"45px",borderRadius:"20px"},children:o(c,{onFinish:B,children:[e(t,{lg:24,xs:24,children:e("div",{className:"main_login_input",children:o("p",{className:"login_link",style:{background:"none"},children:["Doesn't have an account? Â ",e(y,{to:"/register",style:{color:"#EAB2BB"},children:"Signup"})]})})}),e("br",{}),e(t,{lg:24,xs:24,children:e(c.Item,{name:"email",rules:[{required:!0,message:"Email is required"}],children:e(w,{placeholder:"Enter your email",className:"login_input",prefix:e(V,{style:{color:"#EAB2BB"}})})})}),e(t,{lg:24,xs:24,children:e(c.Item,{name:"password",rules:[{required:!0,message:"Password is required"}],children:e(w.Password,{placeholder:"Enter your password",className:"login_input",prefix:e($,{style:{color:"#EAB2BB"}})})})}),e(t,{children:o("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("div",{children:e(R,{style:{display:"flex"},children:"Remember me"})}),e("div",{children:e(y,{to:"/forget-password",children:e("span",{className:"forget_password_head",children:"Forget Password?"})})})]})}),e("br",{}),e(t,{lg:24,xs:24,className:"login_btn_div",children:e(M,{htmlType:"submit",className:"login_btn",style:{border:"none",color:"white"},children:"Login"})})]})}),e(t,{lg:5,xs:0})]}),e("br",{})]})};export{J as default};
